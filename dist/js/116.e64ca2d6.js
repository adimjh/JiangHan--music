"use strict";(self["webpackChunkjianghanmusic"]=self["webpackChunkjianghanmusic"]||[]).push([[116],{7116:function(e,l,t){t.r(l),t.d(l,{default:function(){return H}});var n=t(3396),a=t(9242),c=t(7139),r=t(4870),o=t(4317),s=t(991);function i(){return(0,s.U)("/search/default")}function u(){return(0,s.U)("/search/hot")}function d(e){return(0,s.U)("/cloudsearch",{keywords:e})}function m(e){return(0,s.U)("/song/detail",{ids:e.id})}var v=t(65);const p=e=>((0,n.pushScopeId)("data-v-49b08231"),e=e(),(0,n.popScopeId)(),e),h={class:"search"},k={class:"search-input"},f=p((()=>(0,n.createElementVNode)("i",{class:"icon-search"},null,-1))),w=["placeholder"],E={class:"hot-keys"},V=p((()=>(0,n.createElementVNode)("h1",{class:"title"},"热门搜索",-1))),N=["onClick"],B={class:"search-result"},y=["onClick"],g=(0,n.createTextVNode)(" - ");var C={__name:"Search",setup(e){const l=(0,v.oR)(),t=(0,r.iH)(""),s=(0,r.iH)([]),p=(0,r.iH)(""),C=(0,r.iH)([]),U=(0,r.iH)(null);function _(e){p.value=e}function H(e){return e.ar.map((e=>e.name)).join(" & ")}function b(){p.value="",C.value=[]}async function D(e){const t=await m(e);l.dispatch("addOnePlay",t.songs)}return(0,n.watch)(p,(async e=>{if(U.value.scroll.scrollTo(0,0),!e.trim())return;const l=await d(e);C.value=l.result.songs})),(0,n.onMounted)((async()=>{let e=await i();t.value=e.data.showKeyword;let l=await u();s.value=l.result.hots})),(e,l)=>{const i=(0,n.resolveDirective)("loading");return(0,n.openBlock)(),(0,n.createElementBlock)("div",h,[(0,n.createElementVNode)("div",k,[f,(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"input-inner","onUpdate:modelValue":l[0]||(l[0]=e=>p.value=e),placeholder:t.value},null,8,w),[[a.nr,p.value]]),(0,n.withDirectives)((0,n.createElementVNode)("i",{class:"icon-dismiss",onClick:b},null,512),[[a.F8,p.value]])]),(0,n.createElementVNode)("div",E,[V,(0,n.createElementVNode)("ul",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(s.value,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("li",{key:e,class:"item"},[(0,n.createElementVNode)("span",{onClick:l=>_(e.first)},(0,c.zw)(e.first),9,N)])))),128))])]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",B,[(0,n.createVNode)((0,r.SU)(o.Z),{class:"result-wrapper",ref_key:"scrollRef",ref:U},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("ul",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(C.value,((e,l)=>((0,n.openBlock)(),(0,n.createElementBlock)("li",{key:l,onClick:l=>D(e)},[(0,n.createElementVNode)("span",null,(0,c.zw)(e.name),1),g,(0,n.createElementVNode)("span",null,(0,c.zw)(H(e)),1)],8,y)))),128))])])),_:1},512)])),[[a.F8,p.value.trim()],[i,!C.value.length]])])}}},U=t(89);const _=(0,U.Z)(C,[["__scopeId","data-v-49b08231"]]);var H=_}}]);