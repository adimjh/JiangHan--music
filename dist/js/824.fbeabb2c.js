"use strict";(self["webpackChunkjianghanmusic"]=self["webpackChunkjianghanmusic"]||[]).push([[824],{6834:function(e,t,n){n.d(t,{Z:function(){return s}});var l=n(4870),a=n(3396),o=n(678),c=n(7408);function s(e,t,n){const s=(0,o.yj)(),i=(0,o.tv)(),r=(0,l.iH)([]),u=(0,l.iH)(!0),d=(0,a.computed)((()=>{let n=null;const l=e.detailObj;if(l.id)n=l;else{const e=c.Z.getLocal(t);e&&e.id===s.params.id/1&&(n=e)}return n})),p=(0,a.computed)((()=>d.value?d.value.picUrl:"")),m=(0,a.computed)((()=>d.value?d.value.name:""));return(0,a.onMounted)((async()=>{const e=d.value;if(!e)return void i.push({path:s.matched[0].path});const t=await n(e);r.value=t.hotSongs,u.value=!1})),{picUrl:p,listTitle:m,songs:r,loading:u}}},109:function(e,t,n){n.d(t,{eK:function(){return c},hC:function(){return o},lO:function(){return a}});var l=n(991);function a(){return(0,l.U)("/banner",{type:2})}function o(){return(0,l.U)("/top/playlist",{limit:30})}async function c(e){let t=await(0,l.U)("/playlist/detail",{id:e.id});console.log(t);let n=t.playlist.trackIds;n.length=Math.min(50,n.length);let a=[],o=[];return n.forEach((e=>{o.push(new Promise(((t,n)=>{s(e,a,t)})))})),Promise.all(o).then((()=>({hotSongs:a}))).catch((e=>{throw e}))}function s(e,t,n){(0,l.U)("/song/detail",{ids:e.id}).then((e=>{t.push(e.songs[0]),n()})).catch((e=>{throw e}))}},2280:function(e,t,n){n.d(t,{Z:function(){return E}});var l=n(3396),a=n(7139),o=n(4870),c=n(9242),s=n(678),i=n(65),r=n(15),u=n(4317);const d=e=>((0,l.pushScopeId)("data-v-2e60dafa"),e=e(),(0,l.popScopeId)(),e),p={class:"music-list"},m=d((()=>(0,l.createElementVNode)("i",{class:"icon-back"},null,-1))),v=[m],g={class:"title"},f={class:"play-btn"},h=d((()=>(0,l.createElementVNode)("i",{class:"icon-play"},null,-1))),k={class:"song-list-wrapper"};var y={__name:"MusicList",props:{songs:{type:Array,default:[]},listTitle:String,picUrl:String,loading:Boolean},setup(e){const t=e,n=(0,s.tv)(),d=(0,i.oR)(),m=(0,l.computed)((()=>d.state.playlist)),y=(0,o.iH)(0),U=(0,o.iH)(null),b=(0,o.iH)(0),E=(0,o.iH)(0),S=(0,l.computed)((()=>{let e="40%",n=0,l=1;return E.value>b.value&&(e="40px",n=1),E.value<0&&(l=-E.value/y.value+1),{backgroundImage:`url(${t.picUrl})`,height:e,zIndex:n,transform:`scale(${l})`}})),_=(0,l.computed)((()=>({top:`${y.value}px`,bottom:m.value.length?"60px":0}))),w=(0,l.computed)((()=>{let e="block";return E.value>b.value&&(e="none"),{display:e}})),N=(0,l.computed)((()=>{let e=0;return E.value>0&&(e=Math.min(E.value/25,10)),{backdropFilter:`blur(${e}px)`}}));function V(e){E.value=-e.y}function B(){n.go(-1)}function Z(){d.dispatch("addAllPlay",t.songs)}return(0,l.onMounted)((()=>{y.value=U.value.clientHeight,b.value=y.value-40})),(t,n)=>{const s=(0,l.resolveDirective)("loading");return(0,l.openBlock)(),(0,l.createElementBlock)("div",p,[(0,l.createElementVNode)("div",{class:"back",onClick:B},v),(0,l.createElementVNode)("h1",g,(0,a.zw)(e.listTitle),1),(0,l.createElementVNode)("div",{class:"bg-image",style:(0,a.j5)((0,o.SU)(S)),ref_key:"imageRef",ref:U},[(0,l.createElementVNode)("div",{class:"play-btn-wrapper",style:(0,a.j5)((0,o.SU)(w))},[(0,l.withDirectives)((0,l.createElementVNode)("div",f,[h,(0,l.createElementVNode)("span",{class:"text",onClick:Z},"顺序播放全部")],512),[[c.F8,e.songs.length>0]])],4),(0,l.createElementVNode)("div",{class:"filter",style:(0,a.j5)((0,o.SU)(N))},null,4)],4),(0,l.createVNode)((0,o.SU)(u.Z),{class:"list",probeType:3,style:(0,a.j5)((0,o.SU)(_)),onScroll:V},{default:(0,l.withCtx)((()=>[(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("div",k,[(0,l.createVNode)((0,o.SU)(r.Z),{songs:e.songs},null,8,["songs"])])),[[s,e.loading]])])),_:1},8,["style"])])}}},U=n(89);const b=(0,U.Z)(y,[["__scopeId","data-v-2e60dafa"]]);var E=b},15:function(e,t,n){n.d(t,{Z:function(){return v}});var l=n(3396),a=n(7139),o=n(65);const c={class:"song-list"},s=["onClick"],i={class:"content"},r={class:"name"},u={class:"desc"};var d={__name:"SongList",props:{songs:{type:Array,default:[]}},setup(e){const t=(0,o.oR)();function n(e){return e.ar.map((e=>e.name)).join("-")}function d(e){t.dispatch("addOnePlay",[e])}return(t,o)=>((0,l.openBlock)(),(0,l.createElementBlock)("ul",c,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.songs,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{class:"item",key:e.id,onClick:t=>d(e)},[(0,l.createElementVNode)("div",i,[(0,l.createElementVNode)("h2",r,(0,a.zw)(e.name),1),(0,l.createElementVNode)("p",u,(0,a.zw)(n(e)),1)])],8,s)))),128))]))}},p=n(89);const m=(0,p.Z)(d,[["__scopeId","data-v-b381fe12"]]);var v=m},1824:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var l=n(3396),a=n(4870),o=n(2280),c=n(109),s=n(6834);const i={class:"album-detail"};var r={__name:"AlbumDetail",props:["detailObj"],setup(e){const t=e,{picUrl:n,listTitle:r,songs:u,loading:d}=(0,s.Z)(t,"__albumDetail__",c.eK);return(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",i,[(0,l.createVNode)((0,a.SU)(o.Z),{picUrl:(0,a.SU)(n),listTitle:(0,a.SU)(r),songs:(0,a.SU)(u),loading:(0,a.SU)(d)},null,8,["picUrl","listTitle","songs","loading"])]))}},u=n(89);const d=(0,u.Z)(r,[["__scopeId","data-v-e584152c"]]);var p=d}}]);